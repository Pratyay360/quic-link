import{j as e,B as x}from"./createLucideIcon.DodCJwq1.js";import{$ as w,T as p,C as y,u as s}from"./index.DvZrbCd4.js";import{C,a as v,b as N,c as T,d as R}from"./card.BBKCVRH4.js";import{C as S,L as m}from"./pocketbase.es.DvLyCDLJ.js";import{r as t}from"./index.DwQS_Y10.js";import"./index.TzAc-VgR.js";import"./index.CrJHwP2r.js";const L=new S("https://pocketbase.pratyay.qzz.io");function I(){const[c,f]=t.useState(null),[a,o]=t.useState(!1),n=t.useRef(null),r=t.useRef(null),j=async()=>{const i=n.current?.value.trim();if(!i){s.error("Please enter text");return}o(!0);try{const u="abcdefghijklmnopqrstuvwxyz"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"0123456789";let l="";for(let h=0;h<6;h++)l+=u[Math.floor(Math.random()*u.length)];const b={slug:l,largeText:i};if(!(await L.collection("sharedText").create(b))?.id)throw new Error("No record ID returned");f(`${window.location.origin}/${l}`),s.success("Text shared successfully!")}catch(d){s.error("An unexpected error occurred"),console.error("Unexpected error:",d)}finally{o(!1)}},g=()=>{r.current&&(r.current.select(),navigator.clipboard.writeText(r.current.value),s.success("URL copied to clipboard"))};return e.jsxs("div",{className:"flex justify-center items-center min-h-[calc(100vh-3.5rem)] p-4",children:[e.jsx(w,{richColors:!0,closeButton:!0,position:"bottom-right",expand:!0}),e.jsxs(C,{className:"w-full max-w-md",children:[e.jsxs(v,{children:[e.jsx(N,{children:"Text Share"}),e.jsx(T,{children:"Share text with a unique URL that can be accessed by anyone."})]}),e.jsxs(R,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid w-full gap-1.5",children:[e.jsx(m,{htmlFor:"textArea",children:"Your Text"}),e.jsx(p,{ref:n,placeholder:"Enter text here",id:"textArea",rows:8,disabled:a})]}),e.jsx(x,{onClick:j,disabled:a,className:"w-full bg-purple-500 text-white hover:bg-purple-400 dark:bg-purple-800 dark:hover:bg-purple-700",children:a?"Sharing...":"Share"})]}),c&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2",children:[e.jsxs("div",{className:"grid w-full gap-1.5",children:[e.jsx(m,{htmlFor:"url",children:"Shared URL"}),e.jsx(p,{ref:r,id:"url",readOnly:!0,value:c,className:"flex-grow"})]}),e.jsxs(x,{onClick:g,size:"icon",className:"h-full bg-blue-300",children:[e.jsx(y,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Copy URL"})]})]})]})]})]})}export{I as default};
