import{b as d,j as e,B as i}from"./createLucideIcon.DodCJwq1.js";import{C as x,u as o,$ as h,T as u}from"./index.DvZrbCd4.js";import{r as n}from"./index.DwQS_Y10.js";import{C as p,a as m,b as y,c as f,d as j,e as C}from"./card.BBKCVRH4.js";import"./index.TzAc-VgR.js";import"./index.CrJHwP2r.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],b=d("Trash2",w);function T({text:s}){const[r,t]=n.useState(!1),a=async()=>{try{await navigator.clipboard.writeText(s),t(!0),o.success("Copied to clipboard!"),setTimeout(()=>t(!1),2e3)}catch(l){o.error("Failed to copy"),console.error("Failed to copy text: ",l)}};return e.jsxs(i,{type:"button",onClick:a,"aria-label":"Copy to clipboard",variant:"outline",size:"sm",className:"flex items-center gap-1",children:[e.jsx(x,{className:"h-4 w-4"}),e.jsx("span",{children:r?"Copied!":"Copy"})]})}function E({id:s,initialText:r}){const[t,a]=n.useState(!1),l=async()=>{if(!t){a(!0);try{if(!(await fetch(`/api/shared-text/${s}`,{method:"DELETE"})).ok)throw new Error("Failed to delete");o.success("Text deleted successfully"),setTimeout(()=>{window.location.href="/"},1e3)}catch(c){o.error("Failed to delete text"),console.error("Delete error:",c)}finally{a(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx(h,{richColors:!0,closeButton:!0,position:"bottom-right",expand:!0}),e.jsxs(p,{className:"w-full max-w-lg",children:[e.jsxs(m,{children:[e.jsx(y,{children:"Shared Text"}),e.jsx(f,{children:"This text is accessible via your unique URL"})]}),e.jsx(j,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:`shared-text-${s}`,className:"sr-only",children:"Shared text content"}),e.jsx(u,{id:`shared-text-${s}`,value:r,readOnly:!0,rows:10})]})}),e.jsxs(C,{className:"flex justify-between",children:[e.jsx(T,{text:r}),e.jsxs(i,{onClick:l,disabled:t,variant:"destructive",className:"flex items-center gap-2 bg-red-700",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:t?"Deleting...":"Delete"})]})]})]})]})}export{E as default};
