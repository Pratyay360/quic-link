import{j as e,B as p}from"./createLucideIcon.DodCJwq1.js";import{$ as b,T as m,C as w,u as l}from"./index.DvZrbCd4.js";import{C as L,a as R,b as y,c as C,d as v}from"./card.BBKCVRH4.js";import{C as N,L as x}from"./pocketbase.es.DvLyCDLJ.js";import{r as t}from"./index.DwQS_Y10.js";import"./index.TzAc-VgR.js";import"./index.CrJHwP2r.js";const S=new N("https://pocketbase.pratyay.qzz.io");function k(r){try{return new URL(r),!0}catch{return!1}}function P(){const[r,f]=t.useState(null),[a,c]=t.useState(!1),i=t.useRef(null),s=t.useRef(null),g=async()=>{const o=i.current?.value.trim();if(!o||!k(o)){l.error("Please enter a valid URL");return}c(!0);try{const u="abcdefghijklmnopqrstuvwxyz"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"0123456789";let n="";for(let h=0;h<8;h++)n+=u[Math.floor(Math.random()*u.length)];const U={slug:n,largeurl:o};if(!(await S.collection("shorturls").create(U))?.id)throw new Error("No record ID returned");f(`${window.location.origin}/${n}`),l.success("URL shortened successfully!")}catch(d){l.error("An unexpected error occurred"),console.error(d)}finally{c(!1)}},j=()=>{s.current&&(s.current.select(),navigator.clipboard.writeText(s.current.value),l.success("URL copied to clipboard"))};return e.jsxs("div",{className:"flex justify-center items-center min-h-[calc(100vh-3.5rem)] p-4",children:[e.jsx(b,{richColors:!0,closeButton:!0,position:"bottom-right",expand:!0}),e.jsxs(L,{className:"w-full max-w-md",children:[e.jsxs(R,{children:[e.jsx(y,{children:"URL Shortener"}),e.jsx(C,{children:"Shorten your long URLs to shareable links"})]}),e.jsxs(v,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid w-full gap-1.5",children:[e.jsx(x,{htmlFor:"largeUrlArea",children:"Your Long URL"}),e.jsx(m,{ref:i,placeholder:"Enter long URL here (e.g. https://example.com)",id:"largeUrlArea",rows:4,disabled:a})]}),e.jsx(p,{onClick:g,disabled:a,className:"w-full bg-purple-500 text-white hover:bg-purple-400 dark:bg-purple-800 dark:hover:bg-purple-700",children:a?"Shortening...":"Shorten URL"})]}),r&&e.jsxs("div",{className:"mt-6 flex items-center space-x-2",children:[e.jsxs("div",{className:"grid w-full gap-1.5",children:[e.jsx(x,{htmlFor:"url",children:"Shortened URL"}),e.jsx(m,{ref:s,id:"url",readOnly:!0,value:r,className:"flex-grow"})]}),e.jsxs(p,{onClick:j,size:"icon",className:"h-full bg-blue-300",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Copy URL"})]})]})]})]})]})}export{P as default};
